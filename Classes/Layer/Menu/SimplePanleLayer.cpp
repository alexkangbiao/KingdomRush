#include "SimplePanleLayer.h"#include "GameManager.h"#include "BaseBuildIcon.h"USING_NS_CC;bool SimplePanleLayer::init(){    if ( !BasePanelLayer::init() )    {        return false;    }	_isBuilt = false;	return true;}void SimplePanleLayer::addIcons(){    _sellIcon = SellIcon::create();    _sellIcon->setPosition(Point(0,                                 - _ringBackgroundSprite->getContentSize().height/2));    _sellIcon->setVisible(false);    _sellIcon->setTag(2);    this->addChild(_sellIcon, PanelLayerDrawingOrderIcon);    	_thisLevelCircle = Circle::create();	_thisLevelCircle->setScale(tower->getAttackScope() / _thisLevelCircle->getCircleSize().width);	this->addChild(_thisLevelCircle, PanelLayerDrawingOrderCircle);    	_sellIcon->setVisible(true);    	auto touchListener = EventListenerTouchOneByOne::create();	touchListener->setSwallowTouches(true);	touchListener->onTouchBegan = CC_CALLBACK_2(SimplePanleLayer::onSellTouchBegan, this);	touchListener->onTouchEnded = CC_CALLBACK_2(SimplePanleLayer::onSellTouchEnded, this); 	_eventDispatcher->addEventListenerWithSceneGraphPriority(touchListener, _sellIcon);}bool SimplePanleLayer::onSellTouchBegan(Touch *touch, Event *event){	auto target = static_cast<BaseBuildIcon*>(event->getCurrentTarget());    Point locationInNode = target->convertTouchToNodeSpace(touch);    Size size = target->getSize();	Rect rect = Rect(-size.width / 2,                     -size.height / 2,                     size.width,                     size.height);    if (rect.containsPoint(locationInNode)) {		if(target->getIsSelected())//如果已经选中（第二次按下）		{            if(target->getIsMoneyEnough()) { //如果钱够用				SoundManager::playTowerSell();				GameManager::getInstance()->CURRENT_MONEY = GameManager::getInstance()->CURRENT_MONEY + (tower->getBuildMoney()/2);				tower->sellTower();				this->setVisible(false);				_isBuilt = true;			}		} else {//第一次按下			target->setSelected(true);//设置为选中状态		}        return true;    }    return false;}void SimplePanleLayer::onSellTouchEnded(Touch* touch, Event* event){	if(_isBuilt) {		removeFromParent();	}}