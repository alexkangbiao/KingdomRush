#include "Road.h"#include "GameManager.h"#include "Utility.h"Road::~Road(){}Road::Road(){}bool Road::init(){	if (!Sprite::init())	{		return false;	}    std::string roadImageName[] = {        "mapRoad_1to1_5_0009.png",        "mapRoad_1_5_to2_0013.png",        "mapRoad_2to3_0012.png",        "mapRoad_3to4_0021.png",        "mapRoad_4to5_0141.png",        "mapRoad_5to6_0025.png",        "mapRoad_6to7_0025.png",        "mapRoad_7to8_0022.png",        "mapRoad_8to9_0022.png",        "mapRoad_9to10_0010.png",        "mapRoad_10to11_0013.png",        "mapRoad_11to12_0010.png",        "mapRoad_12to13_0007.png",        "mapRoad_13to14_0010.png"    };        for (int i = 0; i < 13; i++) {        auto roadSprite = Sprite::createWithSpriteFrameName(roadImageName[i]);        roadSprite->setVisible(false);        _roadVector.pushBack(roadSprite);        this->addChild(roadSprite);    }    	this->showFinishedRoad();	this->initRoadAnimation();    	return true;}void Road::showFinishedRoad(){	int hasDone = UserDefault::getInstance()->getIntegerForKey(                                    GameManager::getInstance()->SLOT_X_COMPLETE_COUNT, 0);//表示已经通关数	if (hasDone != 0) {		for(int i = 0; i < hasDone; i++) {			_roadVector.at(i)->setVisible(true);		}	}}void Road::buildRoadAnimation(int number) {	_roadVector.at(number)->setVisible(true);	_roadVector.at(number)->runAction(Animate::create(_roadAnimaitonVector.at(number)));}void Road::initRoadAnimation(){//    std::string animationName[] = {//        "mapRoad_1to1_5_00%02d.png",//        "mapRoad_1_5_to2_00%02d.png",//        "mapRoad_2to3_00%02d.png",//        "mapRoad_3to4_00%02d.png",//        "mapRoad_4to5_0%03d.png",//        "mapRoad_5to6_00%02d.png",//        "mapRoad_6to7_00%02d.png",//        "mapRoad_7to8_00%02d.png",//        "mapRoad_8to9_00%02d.png",//        "mapRoad_9to10_00%02d.png",//        "mapRoad_10to11_00%02d.png",//        "mapRoad_11to12_00%02d.png",//        "mapRoad_12to13_00%02d.png"//    };//    //    for (int j = 0; j < 13; j++) {//        SpriteFrame * frame = NULL;//        Vector<SpriteFrame *> animationFrames;//        for (int i = 1; i < 141; i++) {//            frame = SpriteFrameCache::getInstance()->getSpriteFrameByName(animationName[i]);//            if (frame != nullptr) {//                animationFrames.pushBack(frame);//            }//        }//        roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(animationFrames, 0.1));//    }            	SpriteFrame* frame0 = NULL;	Vector<SpriteFrame*> aFrames0;	for (int len = 1;len <= 7; len++) {		frame0 = SpriteFrameCache::getInstance()->getSpriteFrameByName(                                                                       Utility::string_format("mapRoad_1to1_5_00%02d.png",len));		if(frame0!=nullptr)			aFrames0.pushBack(frame0);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames0, 0.5f));	SpriteFrame* frame1 = NULL;	Vector<SpriteFrame*> aFrames1;	for (int len = 1;len <= 13; len++)	{		frame1 = SpriteFrameCache::getInstance()->getSpriteFrameByName(Utility::string_format("mapRoad_1_5_to2_00%02d.png",len));		if(frame1!=nullptr)			aFrames1.pushBack(frame1);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames1, 0.1f));	SpriteFrame* frame2 = NULL;	Vector<SpriteFrame*> aFrames2;	for (int len = 1;len <= 12; len++)	{		frame2 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_2to3_00%02d.png", len).c_str());		if(frame2!=nullptr)			aFrames2.pushBack(frame2);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames2,0.1f));	SpriteFrame* frame3 = NULL;	Vector<SpriteFrame*> aFrames3;	for (int len = 1;len <= 21; len++)	{		frame3 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_3to4_00%02d.png",len).c_str());		if(frame3!=nullptr)			aFrames3.pushBack(frame3);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames3,0.07f));	SpriteFrame* frame4 = NULL;	Vector<SpriteFrame*> aFrames4;	for (int len = 1;len <= 141; len++)	{		frame4 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_4to5_0%03d.png",len).c_str());		if(frame4!=nullptr)			aFrames4.pushBack(frame4);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames4,0.01f));	SpriteFrame* frame5 = NULL;	Vector<SpriteFrame*> aFrames5;	for (int len = 1;len <= 25; len++)	{		frame5 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_5to6_00%02d.png",len).c_str());		if(frame5!=nullptr)			aFrames5.pushBack(frame5);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames5,0.07f));	SpriteFrame* frame6 = NULL;	Vector<SpriteFrame*> aFrames6;	for (int len = 1;len <= 25; len++)	{		frame6 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_6to7_00%02d.png",len).c_str());		if(frame6!=nullptr)			aFrames6.pushBack(frame6);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames6,0.07f));	SpriteFrame* frame7 = NULL;	Vector<SpriteFrame*> aFrames7;	for (int len = 1;len <= 22; len++)	{		frame7 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_7to8_00%02d.png",len).c_str());		if(frame7!=nullptr)			aFrames7.pushBack(frame7);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames7,0.07f));	SpriteFrame* frame8 = NULL;	Vector<SpriteFrame*> aFrames8;	for (int len = 1;len <= 22; len++)	{		frame8 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_8to9_00%02d.png",len).c_str());		if(frame8!=nullptr)			aFrames8.pushBack(frame8);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames8,0.1f));	SpriteFrame* frame9 = NULL;	Vector<SpriteFrame*> aFrames9;	for (int len = 1;len <= 10; len++)	{		frame9 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_9to10_00%02d.png",len).c_str());		if(frame9!=nullptr)			aFrames9.pushBack(frame9);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames9,0.1f));	SpriteFrame* frame10 = NULL;	Vector<SpriteFrame*> aFrames10;	for (int len = 1;len <= 13; len++)	{		frame10 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_10to11_00%02d.png",len).c_str());		if(frame10!=nullptr)			aFrames10.pushBack(frame10);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames10,0.07f));	SpriteFrame* frame11 = NULL;	Vector<SpriteFrame*> aFrames11;	for (int len = 1;len <= 10; len++)	{		frame11 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_11to12_00%02d.png",len).c_str());		if(frame11!=nullptr)			aFrames11.pushBack(frame11);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames11,0.1f));	SpriteFrame* frame12 = NULL;	Vector<SpriteFrame*> aFrames12;	for (int len = 1;len <= 7; len++)	{		frame12 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_12to13_00%02d.png",len).c_str());		if(frame12!=nullptr)			aFrames12.pushBack(frame12);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames12,0.1f));	SpriteFrame* frame13 = NULL;	Vector<SpriteFrame*> aFrames13;	for (int len = 1;len <= 7; len++)	{		frame13 = SpriteFrameCache::getInstance()->getSpriteFrameByName(StringUtils::format("mapRoad_12to13_00%02d.png",len).c_str());		if(frame13!=nullptr)			aFrames13.pushBack(frame13);	}	_roadAnimaitonVector.pushBack(Animation::createWithSpriteFrames(aFrames13,0.1f));}